!function(t){function i(t,i,e){"#"==t[0]&&(t=t.slice(1));var a=parseInt(t,16),l=(a>>16)+i;l>255?l=255:0>l&&(l=0);var n=(a>>8&255)+i;n>255?n=255:0>n&&(n=0);var r=(255&a)+i;r>255?r=255:0>r&&(r=0);var c=.3086*l+.6094*r+.082*n;return e/=100,l=Math.round(l*e+c*(1-e)),r=Math.round(r*e+c*(1-e)),n=Math.round(n*e+c*(1-e)),"#"+(r|n<<8|l<<16).toString(16)}function e(i,e){t("body").append('<div id="getStyleRuleValue-'+e+'"></div>');var l=t("#getStyleRuleValue-"+e);l.addClass(e);var n=l.css(i),r=a(n);return l.remove(),r}function a(t){if("r"!=t[0])return t;var i=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2)}var l,n=function(t){"object"==typeof t&&(l=this,this._extendOptions(t,!1),this._build())};n.prototype={appendTo:"body",elementId:"canvas",elementClass:"canvas",elementWidth:200,elementHeight:200,dialValue:!1,dialClass:"fg-dial",dialUnit:"%",dialUnitPosition:"after",dialLabel:!1,dialLabelClass:"fg-dial-label",arcSize:85,arcAngleStart:.85,arcAngleEnd:2.15,arcFillPercent:.5,arcFillStart:null,arcFillEnd:null,arcFillInt:null,arcFillTotal:null,arcBgColorLight:80,arcBgColorSat:60,arcStrokeFg:30,arcStrokeBg:30,colorArcFg:"#5bc0de",colorArcBg:null,styleArcFg:null,styleArcBg:null,styleSrc:"color",animateEasing:!0,animateSpeed:5,animateNumerator:12,animateDivisor:15,_animatePerc:0,_animateLoop:null,_canvas:null,_ctx:null,update:function(t){if("object"==typeof t){var i;if("undefined"!=typeof t.arcFillInt&&t.arcFillInt==this.arcFillInt&&"undefined"!=typeof t.arcFillTotal&&t.arcFillTotal==this.arcFillTotal?t.arcFillPercent=this.arcFillPercent:"undefined"==typeof t.arcFillInt||"undefined"==typeof t.arcFillTotal||t.arcFillInt==this.arcFillInt&&t.arcFillTotal!=this.arcFillTotal?"undefined"!=typeof t.arcFillInt&&"undefined"==typeof t.arcFillTotal&&t.arcFillInt!=this.arcFillInt&&(t.arcFillPercent=t.arcFillInt/this.arcFillTotal):t.arcFillPercent=t.arcFillInt/t.arcFillTotal,i="undefined"!=typeof t.arcFillPercent?Math.abs(this.arcFillPercent-t.arcFillPercent):this.arcFillPercent,this._extendOptions(t,!0),clearInterval(this._animateLoop),i>0){var e=this;this._animateLoop=setInterval(function(){return e._animate()},this.animateSpeed*this.animateNumerator/(i*this.animateDivisor))}}},_extendOptions:function(l,n){var r=!1;n&&(r=this.colorArcFg),t.extend(this,l,!0),"undefined"!=typeof l.arcFillStart&&"undefined"!=typeof l.arcFillEnd&&"undefined"!=typeof l.arcFillTotal&&(this.arcFillInt=l.arcFillEnd-l.arcFillStart),"undefined"==typeof l.arcFillPercent&&null!==this.arcFillInt&&this.arcFillInt>=0&&null!==this.arcFillTotal&&this.arcFillTotal>0&&(this.arcFillPercent=this.arcFillInt/this.arcFillTotal),"undefined"==typeof l.elementId&&(this.elementId="fg-"+this.appendTo+"-canvas"),"undefined"!=typeof l.colorArcFg&&(this.colorArcFg=a(l.colorArcFg)),"undefined"!=typeof l.colorArcBg&&(this.colorArcBg=a(l.colorArcBg)),"undefined"!=typeof l.styleArcFg&&"undefined"==typeof l.colorArcFg&&(this.colorArcFg=e(this.styleSrc,this.styleArcFg)),"undefined"==typeof l.colorArcBg&&null===this.colorArcBg&&null!==this.colorArcFg&&(this.colorArcBg=this.colorArcFg),null===typeof this.colorArcBg||n&&a(this.colorArcFg)==a(r)||(a(this.colorArcFg)!=a(r)&&(this.colorArcBg=this.colorArcFg),this.colorArcBg=i(this.colorArcBg,this.arcBgColorLight,this.arcBgColorSat)),"boolean"==typeof l.dialLabel&&l.dialLabel&&(this.dialLabel="FlexGauge")},_build:function(){null===document.getElementById(this.elementId)&&t(this.appendTo).append('<canvas id="'+this.elementId+'" width="'+this.elementWidth+'" height="'+this.elementHeight+'"></canvas>'),this._canvas=document.getElementById(this.elementId),this._ctx=this._canvas.getContext("2d"),this.arcAngleStart=this.arcAngleStart*Math.PI,this.arcAngleEnd=this.arcAngleEnd*Math.PI,this.animateEasing===!1&&(this._animatePerc=this.arcFillPercent);var i=this;this._animateLoop=setInterval(function(){return i._animate()},this.animateSpeed*this.animateNumerator/(this.arcFillPercent*this.animateDivisor))},_animate:function(){var t=Math.round(100*this._animatePerc),i=Math.round(100*this.arcFillPercent);i>t?t++:t--,this._animatePerc=t/100,t===i&&(this.arcFillPercent=this._animatePerc,clearInterval(this._animateLoop),this._draw()),this._draw()},_draw:function(){this._ctx.clearRect(0,0,this.elementWidth,this.elementHeight),this._ctx.beginPath(),this._ctx.strokeStyle=this.colorArcBg,this._ctx.lineWidth=this.arcStrokeBg,this._ctx.arc(this.elementWidth/2,this.elementHeight/2,this.arcSize,this.arcAngleStart,this.arcAngleEnd,!1),this._ctx.stroke();var t=(this.arcAngleEnd-this.arcAngleStart)*this._animatePerc+this.arcAngleStart;this._ctx.beginPath(),this._ctx.strokeStyle=this.colorArcFg,this._ctx.lineWidth=this.arcStrokeFg,this._ctx.arc(this.elementWidth/2,this.elementHeight/2,this.arcSize,this.arcAngleStart,t,!1),this._ctx.stroke(),this._renderLabel()},_renderLabel:function(){if(this.dialValue){var i,e=t(this.appendTo).find("div."+this.dialClass);if(0===e.length&&t(this.appendTo).append('<div class="'+this.dialClass+'"></div>'),e=t(this.appendTo).find("div."+this.dialClass),"boolean"==typeof this.dialValue){switch(this.dialUnit){case"%":i=Math.round(100*this._animatePerc);break;default:i=Math.round(this.arcFillInt*(this._animatePerc/this.arcFillPercent))}switch(i=isNaN(i)?0:i,this.dialUnitPosition){case"before":i=this.dialUnit+i;break;case"after":i+=this.dialUnit}}else i=this.dialValue;e.html(i)}if(this.dialLabel){var a=t(this.appendTo).find("div."+this.dialLabelClass);0===a.length&&t(this.appendTo).append('<div class="'+this.dialLabelClass+'"></div>'),a=t(this.appendTo).find("div."+this.dialLabelClass),a.html(this.dialLabel)}}},"function"==typeof define?define("flex-gauge",["jquery"],function(t){return n}):window.FlexGauge=n}(jQuery);