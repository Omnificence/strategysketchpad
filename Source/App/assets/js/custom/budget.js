function onLoadBudget(){function t(){for(var t=[""],d=0;d<s.objectives.length;d++)t.push(parseFloat(s.objectives[d].budget/_tBudget*100).toFixed(2));for(var n=0,l=1;e>=l;l++){var c=t[l]*r/o*i,v=i-c,p=$("#barDiv").find("#container"+l);$(p).find(".bar").css("top",v+"px"),v>=i&&$(p).find(".bar").css("top",i-10+"px"),$(p).find(".top").css("height",v+"px"),$(p).find(".bottom").css({top:5+v+"px",height:c+"px"}),$("#objp"+s.objectives[l-1].id).html(t[l]+"%"),$(p).attr("data-value",t[l]),n+=parseFloat(t[l])}$("#aBud").html(parseFloat(n).toFixed(2)+"%"),$("#uaBud").html(parseFloat(100-n).toFixed(2)+"%"),a.series[0].data=[["a",n],["b",100-n]],a.resetAxesScale(),a.replot(!1),_gauge=new FlexGauge({appendTo:"#gaug",animateEasing:!1,elementId:"example2_canvas",elementWidth:100,elementHeight:100,arcFillPercent:0,arcAngleStart:1.5,arcAngleEnd:3.5,arcSize:30,arcStrokeFg:8,arcStrokeBg:3,animateSpeed:2,dialValue:!0,colorArcFg:"#50B1A8",colorArcBg:"#CCCCCC"}),$("#bud-nodata").show(),$("#bud-data").hide()}var a=null,e=1,i=280,o=100,r=1,s=orgData;e=s.objectives.length,$(".bcontainer").css("height",i+"px"),$(".bar").css("top",i-10+"px");var d="",n=8;e>8&&(n=e);var l=600/n;if($(document).ready(function(){a=$.jqplot("pie1",[[["a",0],["b",100]]],{seriesColors:["#57c1b7","#ff4c65"],seriesDefaults:{shadow:!1,renderer:$.jqplot.PieRenderer,trendline:{show:!1},rendererOptions:{padding:8,showDataLabels:!1}},grid:{drawGridlines:!1,borderColor:"transparent",shadow:!1,drawBorder:!1,shadowColor:"transparent",backgroundColor:"transparent"},background:"transparent",animateReplot:!0,legend:{show:!1,placement:"outside",rendererOptions:{numberRows:1},location:"s",marginTop:"15px"}});for(var c=1;n>=c;c++)d+=e>=c?'<div id="container'+c+'" class="bcontainer" style="width:'+l+'px;"><div class="perDiv"><span id="objp'+s.objectives[c-1].id+'"></span></div><div data-objid="'+s.objectives[c-1].id+'" id="bar'+c+'" class="ui-draggable bar" style="position: relative;top: '+(i-10)+'px;"><div ></div> <img class="darrow" src="assets/img/arrow2.png" /></div><div id="top" class="top" style="height: '+i+'px; margin-top:-10px;"></div><div id="bottom" class="bottom" style="top: '+i+'px; height: 0px;"></div></div>':'<div id="container'+c+'" class="bcontainer noUse" data-value="0" style="width:'+l+'px;"><div class="perDiv"><span></span></div><div  id="bar'+c+'" class="bar" style="position: relative;top: '+(i-10)+'px;"><div ></div> <img class="darrow" src="assets/img/arrow2.png" /></div><div id="top" class="top" style="height: '+i+'px; margin-top:-10px;"></div><div id="bottom" class="bottom" style="top: '+i+'px; height: 0px;"></div></div>';$("#barDiv").html(d),0>=e&&$("#barDiv").html("<div class='no-obj-ce'>Currently no objectives has been created</div>");for(var c=1;e>=c;c++){var v="#bar"+c,p="#container"+c,g="#top",h="#bottom";$(v).draggable({containment:p,scrollSensitivity:1}),$(v).on("drag",function(){$(this).parent().hasClass("active")||$(this).parent().click();var t=$(this).css("top"),e=$(this).parent().height(),s=$(this).data("objid"),d=this;t=parseInt(t,10);var n=0;$("#barDiv").find(".bcontainer").each(function(t,a){$(this).attr("id")!=$(d).parent().attr("id")&&(n+=parseFloat($(this).attr("data-value")))});var l=e-t;10>=l&&(l=0);var c=parseFloat(l/i*o/r).toFixed(2),v=n+parseFloat(c);v>o&&(c=parseFloat(o-n).toFixed(2),l=c*r/o*i,t=i-l,v=parseFloat(o).toFixed(2)),$(this).parent().attr("data-value",c),$("#objp"+s).html(c+"%"),$("#aBud").html(parseFloat(v).toFixed(2)+"%"),$("#uaBud").html(parseFloat(100-v).toFixed(2)+"%");var p=new Objective;p.id=parseInt($(this).data("objid")),p.budget=parseFloat(_tBudget*c/100).toFixed(2),$("#allbudval").html("$ "+p.budget),orgData=_glocalStorage.loadData("orgdata");for(var b=0;b<orgData.objectives.length;b++)orgData.objectives[b].id==p.id&&(orgData.objectives[b].budget=p.budget);_glocalStorage.saveData("orgdata",orgData),a.series[0].data=[["a",v],["b",o-v]],a.resetAxesScale(),a.replot(!1),t>=i-10&&(t=i-10),$(this).css("top",t),$(this).parent().find(g).height(t),$(this).parent().find(h).css({top:5+t,height:l})}),$(v).on("dragstop",function(){var t=$(this).css("top"),a=$(this).parent().height(),e=$(this).data("objid"),s=this;t=parseInt(t,10);var d=0;$("#barDiv").find(".bcontainer").each(function(t,a){$(this).attr("id")!=$(s).parent().attr("id")&&(d+=parseFloat($(this).attr("data-value")))});var n=a-t;10>=n&&(n=0);var l=parseFloat(n/i*o/r).toFixed(2),c=d+parseFloat(l);c>o&&(l=parseFloat(o-d).toFixed(2),n=l*r/o*i,t=i-n,c=parseFloat(o).toFixed(2)),$(this).parent().attr("data-value",l),$("#objp"+e).html(l+"%"),$("#aBud").html(parseFloat(c).toFixed(2)+"%"),$("#uaBud").html(parseFloat(100-c).toFixed(2)+"%");var v=new Objective;v.id=parseInt($(this).data("objid")),v.budget=parseFloat(_tBudget*l/100).toFixed(2),$("#allbudval").html("$ "+v.budget),orgData=_glocalStorage.loadData("orgdata");for(var p=0;p<orgData.objectives.length;p++)orgData.objectives[p].id==v.id&&(orgData.objectives[p].budget=v.budget);_glocalStorage.saveData("orgdata",orgData),cnt++,_glocalStorage.saveData("countdata",cnt);var b=_glocalStorage.loadData("countdata");$("#sync_count").html(b),$("#sync_count").show(),_gauge.update({arcFillPercent:l/100}),t>=i-10&&(t=i-10),$(this).css("top",t),$(this).parent().find(g).height(t),0==n&&(n=10),$(this).parent().find(h).css({top:5+t,height:n})})}$(".bcontainer").click(function(){if(!$(this).hasClass("noUse")&&!$(this).hasClass("active")){$("#bud-nodata").hide(),$("#bud-data").show(),$(".bcontainer").removeClass("active"),$(this).addClass("active");for(var t=parseInt($(this).find(".bar").data("objid")),a=0;a<s.objectives.length;a++)if(orgData.objectives[a].id==t){$("#objName").html(orgData.objectives[a].objective),$("#allbudval").html("$ "+orgData.objectives[a].budget);var e=parseFloat(orgData.objectives[a].budget/_tBudget*100).toFixed(2),i="";if(void 0==orgData.objectives[a].drivers.length)i+="<li>"+orgData.objectives[a].drivers.driver+"</li>";else for(var o=0;o<orgData.objectives[a].drivers.length;o++)i+="<li>"+orgData.objectives[a].drivers[o].driver+"</li>";$("#liDrivers").html(i),_gauge.update({arcFillPercent:e/100})}}}),window.setTimeout(function(){t()},1e3)}),null!=s){var c=s.detail[0];null==c.vision||""==c.vision?$("#visionDescription").show():($("#allBud").html(c.budget),_tBudget=c.budget)}}var _tBudget=0,_gauge=null;$(".objectsCont").click(function(){$(".bcontainer").removeClass("active"),$("#bud-nodata").show(),$("#bud-data").hide()});