function checkconnection(){var t=navigator.onLine;t||toastr.error("No Active Internet Connection")}function doesConnectionExist(){var t=new XMLHttpRequest,i="http://mintcubes.omnificence.in/strategy/web/images/check.png",e=Math.round(1e4*Math.random());t.open("HEAD",i+"?rand="+e,!1);try{return t.send(),t.status>=200&&t.status<304?!0:!1}catch(a){return!1}}function onLoadExplore(){null!=_cTimer&&clearInterval(_cTimer),$(".load-bar").show(),doesConnectionExist()||toastr.error("No Active Internet Connection");var t=_glocalStorage.loadData("login");null!=t&&getOrganizationData(t.orgid),GetExplore(),$(".load-bar").hide();for(var i=new Array,e=0;e<orgData.objectives.length;e++){var a=new gData;a.X=e+1,a.Y=orgData.objectives[e].budget,i.push(a)}var n=i;window.setTimeout(function(){if(null==_budChart)_budChart=DrawLineChart("#exploreSgraph",n,!0,!1,"Objective","Budget CSI",50);else{var t={linecolor:"#26C0AB",values:n};_budChart.SimpleChart("data",[t]),_budChart.SimpleChart("reload","true")}},1e3);var s=_glocalStorage.loadData("login");s.isowner?($("#swipBtn").show(),$("#swipnoBtn").hide()):($("#swipnoBtn").show(),$("#swipBtn").hide()),$(".swtype1").asSwitch({skin:"skin-6"}),$(".swtype1").on("asSwitch::change",function(t,i){i.checked?($(this).parents("table.swipBtn").find(".active").removeClass("active"),GetInnovationFunctionCarousal(),$("#swtype1_off").addClass("active")):($(this).parents("table.swipBtn").find(".active").removeClass("active"),GetInnovationObjectiveCarousal(),$("#swtype1_on").addClass("active"))}),$(".swtype2").asSwitch({skin:"skin-7"}),$(".swtype2").on("asSwitch::change",function(t,i){var e=new KPI;if(e.id=parseInt($(this).data("id")),0!=e.id&&""!=e.id){$(this).parents("table").find(".active").removeClass("active"),i.checked?(e.status=2,$(this).parents("table").find(".sw2off").addClass("active")):(e.status=1,$(this).parents("table").find(".sw2on").addClass("active"));var a=new CallBack;a.func="onChangedKPIStatus",a.data=e;for(var n=orgData.kpis,s=0;s<n.length;s++)e.id==n[s].kpimapid&&(n[s].status=e.status);orgData.kpis=n,_gUserService.SetKPIStatus(e,a,!0)}}),$(".swtype3").asSwitch({skin:"skin-7"}),$(".swtype3").on("asSwitch::change",function(t,i){var e=new KPI;if(e.id=parseInt($("#hdnkpiid").val()),0!=e.id&&""!=e.id){$(this).parents("table").find(".active").removeClass("active"),i.checked?(e.status=2,$(this).parents("table").find(".sw3off").addClass("active")):(e.status=1,$(this).parents("table").find(".sw3on").addClass("active"));var a=new CallBack;a.func="onChangedKPIStatus",a.data=e;for(var n=orgData.kpis,s=0;s<n.length;s++)e.id==n[s].kpimapid&&(n[s].status=e.status);orgData.kpis=n,_gUserService.SetKPIStatus(e,a,!0)}}),$(".swtype1").asSwitch("set",!1),$(".swtype1").parents("table.swipBtn").find(".active").removeClass("active"),$("#swtype1_on").addClass("active")}function onChangedKPIStatus(t,i){}function onClickBackExpo(){for(var t=orgData.kpis,i=0;i<t.length;i++)1==t[i].status?$("#sw"+t[i].kpimapid).asSwitch("set",!1):$("#sw"+t[i].kpimapid).asSwitch("set",!0)}function onChangeKPIby(t){1==$(t).val()?GetInnovationObjectiveCarousal():GetInnovationFunctionCarousal()}function GetExplore(){var t=[];if(t=orgData,$("#explore-no-objective").hide(),$("#explore-has-objective").hide(),$("#explore-no-function").hide(),$("#explore-has-function").hide(),$("#explore-has-objective").html(""),$("#explore-has-function").html(""),null!=t){var i="",e=t.detail[0];null!=e.vision?(i=e.vision,i=i.charAt(0).toUpperCase()+i.slice(1)):i="No description added yet";var a=parseFloat(e.budget);$("#explore-vision-desc").html(i);var n=t.objectives,s=t.functions;t.kpis;if(n.length>0){for(var o="",d=0,l=0;l<n.length;l++){d=parseFloat(parseFloat(n[l].budget)/a*100).toFixed(1),o+='<div class="col-md-12 col-sm-12 col-xs-12 explore-strategic-objective-box"><div style=" padding-top: 10px;"><table style="width: 100%; border-collapse: separate; border-spacing: 15px 3px;"><tr style="height: 60px;"><td style=" width: 43px; text-align: center;"><div class="runningNumber">'+(l+1)+'</div></td><td style="width: 300px; border-bottom: 1px solid #dadada;"><div class="explore-strategic-objective-box-title ">'+n[l].objective+' </div></td></tr><tr><td></td><td><span style="font-family: &#39;HelveticaNeue_Medium&#39;;">Drivers</span><div style=" overflow-y: auto; -webkit-overflow-scrolling: touch;">';var r=n[l].drivers;if(null!=r)if(r.length>0)for(var c=0;c<r.length;c++)o+='<div class="col-md-6"><ul><li>'+r[c].driver+"</li></ul></div>";else o+='<div class="col-md-6"><ul><li>'+r.driver+"</li></ul></div>";o+='</div></td></tr></table></div><div style="height: 60px; background-color: #f5f5f5;"><table style="width: 100%; border-collapse: separate; border-spacing: 15px 3px;"><tr style="height: 60px;"><td style=" width: 43px; text-align: center;"><div>Budget</div></td><td style="width: 300px;"><div style="padding: 8px 0px"><div style="height: 44px; border-left: 1px solid #dadada; padding: 0px 15px;"><div><table style="width: 100%" class="explore-strategic-budget"><tr><td>$ '+n[l].budget+"</td><td>"+d+'%</td></tr></table><div><progress style="width: 100%;" value="'+parseInt(d)+'" max="100"></progress></div></div></div></div></td></tr></table></div></div>'}$("#explore-has-objective").html(o),$("#explore-has-objective").show()}else $("#explore-no-objective").show();if(s.length<=0)return $("#explore-no-function").show(),void $("#explore-has-function").hide();var p="";if(null!=s){if(s.length>0)for(var l=0;l<s.length;l++)p+=getFunctionView(s[l]);else p+=getFunctionView(s);$("#explore-has-function").html(p),$("#explore-has-function").show()}else $("#explore-no-function").show()}else $("#explore-no-function").show(),$("#explore-no-objective").show();GetInnovationObjectiveCarousal()}function getFunctionView(t){var i=_glocalStorage.loadData("login"),e="";return i.isowner?e='<div class="col-md-6" style="padding: 5px 10px;"><div class="explore-strategic-function-box"><div class="functionUsersContainer" style="margin: 0px; height: 180px;"><div class="functionUserData" style="height: 130px"><div style="padding: 0px 20px"><div class="divFunctionName" style="height: 75px; border-bottom: 1px solid #dadada;"><span class="divfunname_elpsis">'+t.functionname+'</span></div></div><div style="padding-top: 10px;"><table style="word-break: break-word; width: 100%;"><tr><td style="width: 20%; text-align: center;"><span><img src="assets/img/profile_2.png" style="width: 30px" /></span></td><td style="width: 80%; text-align: left;"><span class="divfn_elip">'+(t.firstname+" "+(void 0==t.lastname?"":t.lastname))+'</span><br /></td></tr></table></div></div><div class="functionInviteStatus"><table style="width: 100%;"><tr><td style="width: 20%;"><span><img src="assets/img/mail.png" style="width: 30px" />&nbsp;</span></td><td style="width: 80%; text-align: left;"><span class="divfn_elip1">'+t.email+"</span></td></tr></table></div></div></div></div>":t.ownerid==i.userid&&(e='<div class="col-md-6" style="padding: 5px 10px;"><div class="explore-strategic-function-box"><div class="functionUsersContainer" style="margin: 0px; height: 180px;"><div class="functionUserData" style="height: 130px"><div style="padding: 0px 20px"><div class="divFunctionName" style="height: 75px; border-bottom: 1px solid #dadada;"><span class="divfunname_elpsis">'+t.functionname+'</span></div></div><div style="padding-top: 10px;"><table style="word-break: break-word; width: 100%;"><tr><td style="width: 20%; text-align: center;"><span><img src="assets/img/profile_2.png" style="width: 30px" /></span></td><td style="width: 80%; text-align: left;"><span>'+(t.firstname+" "+(void 0==t.lastname?"":t.lastname))+'</span><br /></td></tr></table></div></div><div class="functionInviteStatus"><table style="width: 100%;"><tr><td style="width: 20%;"><span><img src="assets/img/mail.png" style="width: 30px" />&nbsp;</span></td><td style="width: 80%; text-align: left;"><span class="elipsisdotexp">'+t.email+"</span></td></tr></table></div></div></div></div>"),e}function GetInnovationObjectiveCarousal(){var t=orgData.objectives;if(t.length>0){$("#innovation_myCarousel").show();for(var i="",e="",a=0;a<t.length;a++)i+='<div class="item"><p class="wrap" id="objective_list_'+t[a].id+'" objectiveid="'+t[a].id+'"><span >'+t[a].objective+"</p></span></div>",e+='<li id="objective_indicator_'+t[a].id+'" data-target="#innovation_myCarousel"></li>';$("#innovation_myCarousel").find(".carousel-inner").html(i),$("#innovation_myCarousel").find(".carousel-indicators").html(e),$("#innovation_myCarousel").find("#objective_list_"+t[0].id).parent("div").addClass("active"),$("#innovation_myCarousel").find("#objective_indicator_"+t[0].id).addClass("active"),GetInnovationLandscapeKPIs(t[0].id)}else $("#innovation_myCarousel").hide()}function GetInnovationLandscapeKPIs(t){t=parseInt(t);var i=orgData.functions,e=orgData.kpis;$("#innovation-function-kpi-container").html("");var a="";if(null!=i){for(var n=0;n<i.length;n++){var s=_glocalStorage.loadData("login"),o=!1;if(s.isowner?o=!0:s.userid==i[n].ownerid&&(o=!0),o){var d=0;if(void 0==i[n].innovation&&(i[n].innovation=0),a+='<div class="innovation-function-kpi-div"><div class="innovation-function-table"><table style="width:100%"><tr><td style=" padding-right: 15px; width:80%;"><p class="txtellfo">'+i[n].functionname+'</p></td><td style="border-left: 1px solid #7e969a; padding-left: 15px;"><span><img src="assets/img/innovation.png" style="width: 30px;"></span><span style="font-weight: bolder;"> '+i[n].innovation+'</span><span> Innovations</span></td></tr></table></div><div style="width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch;"><div id="kpi-length_'+t+"_"+i[n].functionid+'">',null!=e)for(var l=0;l<e.length;l++)if(parseInt(e[l].functionid)==parseInt(i[n].functionid)&&parseInt(e[l].objectiveid)==t)if(s.isowner){var r="All Good";2==e[l].status&&(r="Concern");var c="All Good"==r?r:"Concern",p="All Good"==c?"blue_dot":"red_dot";a+='<div id="kpc'+t+e[l].functionid+l+'" style="padding: 15px 5px; width: 400px; float: left"onclick="getKPIDiscussionAndInnovation('+t+", "+e[l].functionid+", "+e[l].kpimapid+',this)" data-id="#page-chat" data-animate="1" class="transition" itemtype="page"><div class="innovation-function-kpi-content"><div class="innovation-function-kpi-title"><span class="kpides_elpsis">'+e[l].description+'</span></div><div class="innovation-function-kpi-statistics"><div class="innovation-function-kpi-statistics-left"><table><tr><td><img src="assets/img/dollar_1.png" style="width: 35px;" /></td><td><span class="ki_de_eli">'+e[l].kpiname+'</span></td></tr><tr><td><img src="assets/img/comments.png" style="width: 35px;" /></td><td>'+e[l].message+'</td></tr><tr><td><img src="assets/img/'+p+'.png" style="width: 20px;" /></td><td>'+c+'</td></tr></table></div><div class="innovation-function-kpi-statistics-right"><div style="font-family: &#39;HelveticaNeue_Light&#39;; font-size: 40px; color: #5abbba;">'+e[l].innovation+"</div><div>Innovations</div></div></div></div></div>"}else{var r="All Good",v=1==e[l].status?"":"checked",h=1==e[l].status?"sw2on active":"sw2on",g=1==e[l].status?"sw2off":"sw2off active";a+='<div id="kpc'+t+e[l].functionid+l+'" class="fun-noow"onclick="getKPIDiscussionAndInnovation('+t+", "+e[l].functionid+", "+e[l].kpimapid+',this)"><div class="innovation-function-kpi-content" style="height: 260px;"><div class="innovation-function-kpi-title transition" data-id="#page-chat" itemtype="page" id="kpi'+e[l].kpimapid+'" data-animate="1" ><span class="kpi_desc_elip">'+e[l].description+'</span></div><div class="innovation-function-kpi-statistics-ow"><div class="innovation-function-kpi-statistics-left-ow"><table style="width: 100%;"><tr style=" color: #D3D3D3; "><td  colspan="2"><table style="width:100%;"><tr><td><img src="assets/img/dollar_1.png" style="width: 35px;" /></td><td class="kpics">'+e[l].kpiname+'</td></tr></table></td></tr><tr><td colspan="2" style="text-align:center; padding-top:40px;"><input id="sw'+e[l].kpimapid+'" data-id="'+e[l].kpimapid+'" class="swtype2" '+v+' type="checkbox" /></td></tr><tr><td class="'+h+'" style="padding-left: 0px;">All Good</td><td class="'+g+'" style="text-align:right; padding-right: 5px;">Concern</td></tr></table></div><div class="innovation-function-kpi-statistics-right-ow transition" data-id="#page-chat" id="kpi'+e[l].kpimapid+'" data-animate="1"  style="color: #D3D3D3;"><div style="font-family: &#39;HelveticaNeue_Light&#39;; font-size: 22px;">'+e[l].innovation+'</div><div>Innovation</div><div><img src="assets/img/add.png" style="width: 45px;margin-top: 15px;"/></div><div style="color:#52b8b7;">Add Innovation</div></div></div></div></div>'}a+='<br style="clear: left" /></div></div></div>'}}$("#innovation-function-kpi-container").html(a);for(var n=0;n<i.length;n++){var d=0;if(null!=e)for(var l=0;l<e.length;l++)parseInt(e[l].functionid)==parseInt(i[n].functionid)&&parseInt(e[l].objectiveid)==t&&(d+=1);0!=d&&s.isowner&&$("#kpi-length_"+t+"_"+i[n].functionid).css("width",410*d+"px")}void 0!=PageTransitions&&PageTransitions.initcall()}$(".swtype2").asSwitch({skin:"skin-7"}),$(".swtype2").on("asSwitch::change",function(t,i){var e=new KPI;if(e.id=parseInt($(this).data("id")),0!=e.id&&""!=e.id){$(this).parents("table").find(".active").removeClass("active"),i.checked?(e.status=2,$(this).parents("table").find(".sw2off").addClass("active")):(e.status=1,$(this).parents("table").find(".sw2on").addClass("active"));var a=new CallBack;a.func="onChangedKPIStatus",a.data=e;for(var n=orgData.kpis,s=0;s<n.length;s++)e.id==n[s].kpimapid&&(n[s].status=e.status);orgData.kpis=n,_gUserService.SetKPIStatus(e,a,!0)}})}function GetInnovationFunctionCarousal(){var t=orgData.functions;if(t.length>0){$("#innovation_myCarousel").show();for(var i="",e="",a=0;a<t.length;a++)i+='<div class="item"><p class="wrap" id="function_list_'+t[a].functionid+'" functionid="'+t[a].functionid+'"><span >'+t[a].functionname+"</p></span></div>",e+='<li id="objective_indicator_'+t[a].functionid+'" data-target="#innovation_myCarousel"></li>';$("#innovation_myCarousel").find(".carousel-inner").html(i),$("#innovation_myCarousel").find(".carousel-indicators").html(e),$("#innovation_myCarousel").find("#function_list_"+t[0].functionid).parent("div").addClass("active"),$("#innovation_myCarousel").find("#function_indicator_"+t[0].functionid).addClass("active"),GetInnovationLandscapeKPIsbyFunction(t[0].functionid)}else $("#innovation_myCarousel").hide()}function GetInnovationLandscapeKPIsbyFunction(t){functionId=parseInt(t);var i=orgData.objectives,e=orgData.kpis;$("#innovation-function-kpi-container").html("");var a="";if(null!=i){for(var n=0;n<i.length;n++){var s=0;if(void 0==i[n].innovation&&(i[n].innovation=0),a+='<div class="innovation-function-kpi-div"><div class="innovation-function-table"><table><tr><td style=" padding-right: 15px; width:80%;"><p class="txtellfo">'+i[n].objective+'</p></td><td style="border-left: 1px solid #7e969a; padding-left: 15px;"><span><img src="assets/img/innovation.png" style="width: 30px;"></span><span style="font-weight: bolder;"> '+i[n].innovation+'</span><span> Innovations</span></td></tr></table></div><div style="width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch;"><div id="kpi-length_'+functionId+"_"+i[n].id+'">',null!=e)for(var o=0;o<e.length;o++)if(parseInt(e[o].objectiveid)==parseInt(i[n].id)&&parseInt(e[o].functionid)==functionId){var d="All Good";2==e[o].status&&(d="Concern");var l="All Good"==d?d:"Concern",r="All Good"==l?"blue_dot":"red_dot";a+='<div id="kpc'+e[o].objectiveid+functionId+o+'" style="padding: 15px 5px; width: 400px; float: left"onclick="getKPIDiscussionAndInnovation('+e[o].objectiveid+", "+functionId+", "+e[o].kpiid+',this)" data-id="#page-chat" data-animate="1" class="transition" itemtype="page"><div class="innovation-function-kpi-content"><div class="innovation-function-kpi-title"><span class="kpides_elpsis">'+e[o].description+'</span></div><div class="innovation-function-kpi-statistics"><div class="innovation-function-kpi-statistics-left"><table><tr><td><img src="assets/img/dollar_1.png" style="width: 35px;" /></td><td class="ki_de_eli">'+e[o].kpiname+'</td></tr><tr><td><img src="assets/img/comments.png" style="width: 35px;" /></td><td>'+e[o].message+'</td></tr><tr><td><img src="assets/img/'+r+'.png" style="width: 20px;" /></td><td>'+l+'</td></tr></table></div><div class="innovation-function-kpi-statistics-right"><div style="font-family: &#39;HelveticaNeue_Light&#39;; font-size: 40px; color: #5abbba;">'+e[o].innovation+"</div><div>Innovations</div></div></div></div></div>"}a+='<br style="clear: left" /></div></div></div>'}$("#innovation-function-kpi-container").html(a);for(var n=0;n<i.length;n++){var s=0;if(null!=e)for(var o=0;o<e.length;o++)parseInt(e[o].functionid)==parseInt(functionId)&&parseInt(e[o].objectiveid)==i[n].id&&(s+=1);0!=s&&$("#kpi-length_"+functionId+"_"+i[n].id).css("width",410*s+"px")}void 0!=PageTransitions&&PageTransitions.initcall()}}function getKPIDiscussionAndInnovation(t,i,e,a){if(a.removeAttribute("data-id"),0>=t||0>=i||0>=e||void 0==e)return void toastr.error("Please sync before accessing this section.");if(!doesConnectionExist())return void toastr.error("No Active Internet Connection");a.setAttribute("data-id","#page-chat"),_cTimer=null,StartChatTimer();var n=_glocalStorage.loadData("login"),s="";n.isowner?($("#kpiow").show(),s="#kpiow",$("#kpinoow").hide(),$("#InnovationPost_UIType_1").show(),$("#InnovationPost_UIType_2").hide(),$(".load-bar").show()):($("#kpiow").hide(),s="#kpinoow",$("#kpinoow").show(),$("#InnovationPost_UIType_1").hide(),$("#InnovationPost_UIType_2").show()),t=parseInt(t),i=parseInt(i),e=parseInt(e),$("#hdnkpiid").val(e);var o=orgData;if(null!=o)for(var d=o.kpis,l=o.functions,r=o.objectives,c=0;c<d.length;c++){var p=parseInt(d[c].objectiveid),v=parseInt(d[c].functionid),h=parseInt(d[c].kpimapid);if(p==t&&v==i&&h==e){$(s).find("#kpi-chat-title").html(d[c].description);for(var g=0;g<l.length;g++)parseInt(l[g].functionid)==i&&$(s).find("#kpi-chat-for-function").html(l[g].functionname);for(var u=0;u<r.length;u++)parseInt(r[u].id)==t&&$(s).find("#kpi-chat-for-objective").html(r[u].objective);if(!n.isowner){$("#swtype3").parents("table").find(".active").removeClass("active"),1==d[c].status?($("#swtype3").asSwitch("set"),$("#swtype3").parents("table").find(".sw3on").addClass("active")):($("#swtype3").asSwitch("set",!0),$("#swtype3").parents("table").find(".sw3off").addClass("active"));1==d[c].status?"":"checked",1==d[c].status?"sw2on active":"sw2on",1==d[c].status?"sw2off":"sw2off active"}}}var f=new CallBack;f.func="onSuccessGetChat",f.data=!0,$(".load-bar").show(),$("#chatContent").html(""),$("#mainVendor").html(""),$("#innovationList").html(""),$(".load-bar").show(),$(".load-bar").show(),_gUserService.GetMessageList(e,f,!0),StartChatTimer(),$(".swtype3").asSwitch({skin:"skin-7"}),$(".swtype3").on("asSwitch::change",function(t,i){var e=new KPI;if(e.id=parseInt($("#hdnkpiid").val()),0!=e.id&&""!=e.id){$(this).parents("table").find(".active").removeClass("active"),i.checked?(e.status=2,$(this).parents("table").find(".sw3off").addClass("active")):(e.status=1,$(this).parents("table").find(".sw3on").addClass("active"));var a=new CallBack;a.func="onChangedKPIStatus",a.data=e;for(var n=orgData.kpis,s=0;s<n.length;s++)e.id==n[s].kpimapid&&(n[s].status=e.status);orgData.kpis=n,_gUserService.SetKPIStatus(e,a,!0)}})}function onGetVendorList(t,i){var e=new CallBack;e.func="onGetInnovation",_gUserService.GetInnovationList(parseInt($("#hdnkpiid").val()),e,!0);var a="";if(null!=t){for(var n=0;n<t.length;n++)a+='<div class="vendorDiv"><table><tr class="title"><td colspan="2">'+t[n].vendorcompany+'</td></tr><tr><td class="name">'+t[n].vendorname+'</td><td class="email">'+t[n].vendoremail+"</td></tr></table></div>";void 0==t.length&&void 0!=t.vendorid&&(a+='<div class="vendorDiv"><table><tr class="title"><td colspan="2">'+t.vendorcompany+'</td></tr><tr><td class="name">'+t.vendorname+'</td><td class="email">'+t.vendoremail+"</td></tr></table></div>")}$("#mainVendor").html(a),$(".load-bar").hide()}function onGetInnovation(t,i){var e=_glocalStorage.loadData("login");if(e.isowner)return void GetPublishedInnovations(t,i);var a="";if(null!=t){for(var n=0;n<t.length;n++)a+='<div class="col-md-6" style="padding: 5px 10px;"><div class="explore-strategic-function-box"><div class="functionUsersContainer" style="margin: 0px; height: 250px;"><div class="functionUserData" style="height: 200px"><div style="padding: 0px 20px; position:relative;"><div class="divFunctionName" style="height: 50px; text-align: left;"><span class="divfunname_elpsis">'+t[n].name+"</span></div>",a+=t[n].ispublished?'<button  class="btn-blue posbtnabs" disabled>Published <img src="assets/img/check.png" style="width:22px;" /></button>':'<button data-id="'+t[n].innovationid+'"  onclick="onClickPublishIn(this)"  class="btn-blue posbtnabs">Publish </button>',a+='</div><div style="padding: 0px 20px;color: #C8CACB;">'+timeDifference(t[n].postedon)+'</div><div style="height: 120px; overflow-y: auto; -webkit-overflow-scrolling: touch;"><div style="padding: 15px;"><table style="word-break: break-word; width: 100%;"><tr><td>'+t[n].description+'</td></tr></table></div></div></div><div class="functionInviteStatus" style="padding: 0px 10px;"><table style="width: 100%; height: 50px;"><tr><td style="width: 10%; text-align: left;"><span><img src="assets/img/attach.png" style="width: 30px" />&nbsp;</span></td><td style="width: 80%; text-align: left;"><span onclick="got_link_confirm(this)" value="'+t[n].link+'">http://'+(t[n].link.length>22?t[n].link.substr(0,20)+"...":t[n].link)+"</span>",a+=t[n].vendorid>0?"<div class='cn'>"+(t[n].vendorcompany.length>12?t[n].vendorcompany.substr(0,10)+"...":t[n].vendorcompany)+"</div>":"<div class='cn'>Self</div>",a+="</td></tr></table></div></div></div></div>";void 0==t.length&&void 0!=t.innovationid&&(a+='<div class="col-md-6" style="padding: 5px 10px;"><div class="explore-strategic-function-box"><div class="functionUsersContainer" style="margin: 0px; height: 250px;"><div class="functionUserData" style="height: 200px"><div style="padding: 0px 20px; position:relative;"><div class="divFunctionName" style="height: 50px; text-align: left;"><span class="divfunname_elpsis">'+t.name+"</span></div>",a+=t.ispublished?'<button  class="btn-blue posbtnabs" disabled>Published <img src="assets/img/check.png" style="width:22px;" /></button>':'<button data-id="'+t.innovationid+'" onclick="onClickPublishIn(this)" class="btn-blue posbtnabs">Publish </button>',a+='</div><div style="padding: 0px 20px;color: #C8CACB;>'+timeDifference(t.postedon)+'</div><div style="height: 120px; overflow-y: auto; -webkit-overflow-scrolling: touch;"><div style="padding: 15px;"><table style="word-break: break-word; width: 100%;"><tr><td>'+t.description+'</td></tr></table></div></div></div><div class="functionInviteStatus" style="padding: 0px 10px;"><table style="width: 100%; height: 50px;"><tr><td style="width: 10%; text-align: left;"><span><img src="assets/img/attach.png" style="width: 30px" />&nbsp;</span></td><td style="width: 80%; text-align: left;"><span onclick="got_link_confirm(this)" value="'+t.link+'">http://'+(t.link.length>22?t.link.substr(0,20)+"...":t.link)+"</span>",a+=t.vendorid>0?"<div class='cn'>"+(t.vendorcompany.length>12?t.vendorcompany.substr(0,10)+"...":t.vendorcompany)+"</div>":"<div class='cn'>Self</div>",a+="</td></tr></table></div></div></div></div>")}$("#innovationList").html(a),$(".load-bar").hide()}function onSuccessGetChat(t,i){if(i){var e=new CallBack;e.func="onGetVendorList";var a=_glocalStorage.loadData("login");_gUserService.GetVendorList(parseInt(a.orgid),e,!0)}var n="";if(null!=t){for(var s=0;s<t.length;s++){var o=_gLocalUrl+"getfile.aspx?type=image&id="+t[s].userid,d='<div class="chatDiv"><table class="chatTable"><tr><td class="first"> </td><td class="second"><div class="speechR"><p>'+t[s].message+'</p><p class="time">'+timeDifference(t[s].messagetime)+'</p></div></td><td class="third"><img src="'+o+'" /></td></tr></table> </div>',l='<div class="chatDiv"><table class="chatTable"><tr><td class="first"><img src="'+o+'" /> </td><td class="second"><div class="speechL"><p>'+t[s].message+'</p><p class="time">'+timeDifference(t[s].messagetime)+'</p></div></td><td class="third"></td></tr></table> </div>',r=_glocalStorage.loadData("login");n+=r.userid==t[s].userid?d:l}if(void 0==t.length&&void 0!=t.userid){var o=_gLocalUrl+"getfile.aspx?type=image&id="+t.userid,d='<div class="chatDiv"><table class="chatTable"><tr><td class="first"> </td><td class="second"><div class="speechR"><p>'+t.message+'</p><p class="time">'+timeDifference(t.messagetime)+'</p></div></td><td class="third"><img src="'+o+'" /></td></tr></table> </div>',l='<div class="chatDiv"><table class="chatTable"><tr><td class="first"><img src="'+o+'" /> </td><td class="second"><div class="speechL"><p>'+t.message+'</p><p class="time">'+timeDifference(t.messagetime)+'</p></div></td><td class="third"></td></tr></table> </div>',r=_glocalStorage.loadData("login");n+=r.userid==t.userid?d:l}}$("#chatContent").html(n),window.setTimeout(function(){$("#chatContent").scrollTop($("#chatContent")[0].scrollHeight)},100),$(".load-bar").hide()}function GetPublishedInnovations(t,i){$("#posted_innovations").html("");var e="";if(null!=t){for(var a=0;a<t.length;a++)if(t[a].ispublished){var n=t[a].link,s=n.length>22?n.substr(0,20)+"...":n;e+='<div class="col-md-6" style="padding: 5px 10px;"><div class="explore-strategic-function-box"><div class="functionUsersContainer" style="margin: 0px; height: 250px;"><div class="functionUserData" style="height: 200px"><div style="padding: 0px 20px; position:relative;"><div class="divFunctionName" style="height: 50px; text-align: left;"><span class="divfunname_elpsis">'+t[a].name+"</span></div>",e+='</div><div style="height: 150px; overflow-y: auto; -webkit-overflow-scrolling: touch;"><div style="padding: 15px;"><table style="word-break: break-word; width: 100%;"><tr><td>'+t[a].description+'</td></tr></table></div></div></div><div class="functionInviteStatus" style="padding: 0px 10px;"><table style="width: 100%; height: 50px;"><tr><td style="width: 10%; text-align: left;"><span><img src="assets/img/attach.png" style="width: 30px" />&nbsp;</span></td><td style="width: 80%; text-align: left;"><span onclick="got_link_confirm(this)" value="'+s+'">http://'+s+"</span></td></tr></table></div></div></div></div>"}if(void 0==t.length&&void 0!=t.innovationid&&t.ispublished){var n=t.link,s=n.length>22?n.substr(0,20)+"...":n;e+='<div class="col-md-6" style="padding: 5px 10px;"><div class="explore-strategic-function-box"><div class="functionUsersContainer" style="margin: 0px; height: 250px;"><div class="functionUserData" style="height: 200px"><div style="padding: 0px 20px; position:relative;"><div class="divFunctionName" style="height: 50px; text-align: left;"><span class="divfunname_elpsis">'+t.name+"</span></div>",e+='</div><div style="height: 150px; overflow-y: auto; -webkit-overflow-scrolling: touch;"><div style="padding: 15px;"><table style="word-break: break-word; width: 100%;"><tr><td>'+t.description+'</td></tr></table></div></div></div><div class="functionInviteStatus" style="padding: 0px 10px;"><table style="width: 100%; height: 50px;"><tr><td style="width: 10%; text-align: left;"><span><img src="assets/img/attach.png" style="width: 30px" />&nbsp;</span></td><td style="width: 80%; text-align: left;"><span onclick="got_link_confirm(this)" value="'+s+'">http://'+s+"</span></td></tr></table></div></div></div></div>"}}$("#posted_innovations").html(e),$(".load-bar").hide()}function onSendChat(){var t=$("#dText").val().replace(/\n|\r\n|\r/g,"<br>"),i=_glocalStorage.loadData("login"),e=new Message;e.message=t,e.kpimapid=parseInt($("#hdnkpiid").val()),e.userid=parseInt(i.userid);var a=new CallBack;a.func="onSuccessSendChat",a.data=t,_gUserService.PostMessage(e,a,!0)}function onSuccessSendChat(t,i){if(t){var e=new CallBack;e.func="onSuccessGetChat",e.data=!1,$(".load-bar").show(),$("#dText").val(""),_gUserService.GetMessageList(parseInt($("#hdnkpiid").val()),e,!0)}else toastr.error("Something went wrong")}function StartChatTimer(){null==_cTimer&&(_cTimer=window.setInterval(function(){var t=new CallBack;t.func="onSuccessGetChat",t.data=!1,_gUserService.GetMessageList(parseInt($("#hdnkpiid").val()),t,!0)},3e4))}function showExploreHelp(){var t=_glocalStorage.loadData("login");t.isowner?$("#ceo-explore-help").modal("show"):$("#head-explore-help").modal("show")}function redirectToLink(){$("#redirect-modal").modal("hide"),null!=tempLink&&(navigator.userAgent.match(/iPad/i)?window.location="nav://,url,"+tempLink:window.open(tempLink,"_blank"))}var _budChart=null;$(document).one("focus.textarea",".autoExpand",function(){var t=this.value;this.value="",this.baseScrollHeight=this.scrollHeight,this.value=t}).on("input.textarea",".autoExpand",function(){var t,i=0|this.getAttribute("data-min-rows");this.rows=i,t=Math.ceil((this.scrollHeight-this.baseScrollHeight)/17),this.rows=i+t});var _cTimer=null;