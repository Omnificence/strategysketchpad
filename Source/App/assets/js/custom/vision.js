function hideNativeScroll(){g_nativeScrollVisible&&(window.location="nav://,hidebudget")}function onYearSelection(t,e){var a=parseInt("20"+t),o=parseInt("20"+e),i=new Date;i.setFullYear(a);var n=new Date;n.setFullYear(o),orgData.detail[0].fromdate=i,orgData.detail[0].todate=n,_glocalStorage.saveData("orgdata",orgData);var l=parseInt(_glocalStorage.loadData("countdata"));l++,$("#sync_count").html(l),$("#sync_count").show(),_glocalStorage.saveData("countdata",l)}function onLoadVision(){$(".load-bar").show(),GetVision(),$(".load-bar").hide(),resizetext()}function checkNumberEntry(t){var e=t.which?t.which:event.keyCode;return 44!=e&&46!=e&&e>31&&(48>e||e>57)?!1:!0}function CheckBudgetInc(){if(isBudgetModified){var t=$("#allocatedVisionBudget").val();t=t.replace(/,/g,"");for(var e=0,a=0;a<orgData.objectives.length;a++)e+=parseFloat(orgData.objectives[a].budget);if(""==t&&(t=0),e>parseFloat(t))return toastr.error("You can reduce only unallocated budget. Please unallocated budget and try again"),$("#allocatedVisionBudget").val(e.toFixed(2)),void addCommasToNumber(document.getElementById("allocatedVisionBudget"));orgData.detail[0].budget=t,_glocalStorage.saveData("orgdata",orgData),incCount(),GetVision(),isBudgetModified=!1}}function incCount(){_glocalStorage.loadData("countdata");cnt++,$("#sync_count").html(cnt),$("#sync_count").show(),_glocalStorage.saveData("countdata",cnt)}function textresizefn(){$("#allocatedVisionBudget").inputfit()}function GetVision(){$("#visionData").hide(),$("#visionDescription").hide();var t=[];if(t=orgData,null!=t)if(t=t.detail[0],null==t.vision||""==t.vision)$("#visionDescription").show(),setTimeout(function(){window.location="nav://,budget,16,17"},500),g_nativeScrollVisible=!0;else{var e=t.vision;e=e.charAt(0).toUpperCase()+e.slice(1),$("#visionData").html(e),$("#visionData").show();var a=new Date(t.fromdate).getFullYear().toString(),o=new Date(t.todate).getFullYear().toString();setTimeout(function(){window.location="nav://,budget,"+a.substr(2)+","+o.substr(2)},500),g_nativeScrollVisible=!0,$("#allocatedVisionBudget").val(t.budget);var i=document.getElementById("allocatedVisionBudget");addCommasToNumber(i),$("#visionText").val(t.vision)}else setTimeout(function(){window.location="nav://,budget,16,17"},500),g_nativeScrollVisible=!0}function createVision(){var t=_glocalStorage.loadData("login"),e=$.trim($("#visionText").val());if(0==e.length)return void toastr.error("Vision description should not be empty");var a=$.trim($("#allocatedVisionBudget").val());if(a=a.replace(/,/g,""),0==a.length)return void toastr.error("Vision budget should not be empty");for(var o=0,i=0;i<orgData.objectives.length;i++)o+=parseFloat(orgData.objectives[i].budget);if(o>=parseFloat(a))return void toastr.error("Reduce the allocated space for Objectives");var n=parseInt("20"+$("#stDat").val()),l=parseInt("20"+$("#enDat").val()),r=new Date;r.setFullYear(n);var s=new Date;s.setFullYear(l);var d=new Vision;d.orgid=t.orgid,d.vision=e,d.fromdate=r,d.todate=s,d.budget=a,d.currency="AUD";var c=new CallBack;c.func="onSuccessVisionCreation",$(".load-bar").show(),orgData.detail[0].orgid=d.orgid,orgData.detail[0].vision=d.vision,orgData.detail[0].fromdate=d.fromdate,orgData.detail[0].todate=d.todate,orgData.detail[0].budget=d.budget,orgData.detail[0].currency=d.currency,_glocalStorage.saveData("orgdata",orgData),toastr.success("Vision Created Successfully");_glocalStorage.loadData("countdata");cnt++,$("#sync_count").html(cnt),$("#sync_count").show(),_glocalStorage.saveData("countdata",cnt),_glocalStorage.loadData("orgdata"),$("#visionDescription").hide(),$("#visionData").html(orgData.detail[0].vision),$("#visionData").show(),$(".check-icon-blue").hide(),$(".load-bar").hide()}function getIndexForValue(t,e){for(var a=0;a<t.options.length;a++)if(t.options[a].value==e)return a}function saveVisiondata(){$(".check-icon-gray").hide(),$(".check-icon-blue").show();var t=$.trim($("#visionText").val()),e=t;orgData.detail[0].vision=e,_glocalStorage.saveData("orgdata",orgData)}function savaVisiondata1(){$(".check-icon-gray").hide(),$(".check-icon-blue").show();var t=$.trim($("#visionText").val()),e=t;orgData.detail[0].vision=e,_glocalStorage.saveData("orgdata",orgData)}function editVision(){orgData=_glocalStorage.loadData("orgdata");var t=$.trim($("#visionData").html());$("#visionText").val(t),$("#visionData").hide(),$("#visionDescription").show(),$(".check-icon-gray").hide(),$(".check-icon-blue").show()}function onSuccessVisionCreation(t,e){if($(".load-bar").show(),t){var a=_glocalStorage.loadData("login");getOrganizationData(a.orgid),GetVision(),toastr.success("Vision details added successfully")}else toastr.error("Something went wrong");$(".load-bar").hide()}function resizevisiontext(){var t=document.getElementById("visionText").value,e=document.getElementById("visionText").style.fontSize="20px";t.length>=100&&(document.getElementById("visionText").style.fontSize=parseInt(e)-5+"px")}function resizetext(){var t=document.getElementById("allocatedVisionBudget").value,e=document.getElementById("allocatedVisionBudget").style.fontSize="60px";t.length;t.length>=8&&(document.getElementById("allocatedVisionBudget").style.fontSize=parseInt(e)-10+"px"),t.length>=9&&(document.getElementById("allocatedVisionBudget").style.fontSize=parseInt(e)-20+"px"),t.length>=10&&(document.getElementById("allocatedVisionBudget").style.fontSize=parseInt(e)-25+"px"),t.length>=11&&(document.getElementById("allocatedVisionBudget").style.fontSize=parseInt(e)-30+"px"),t.length>=13&&(document.getElementById("allocatedVisionBudget").style.fontSize=parseInt(e)-35+"px"),t.length>=17&&(document.getElementById("allocatedVisionBudget").style.fontSize=parseInt(e)-38+"px")}function ModifyBudget(){isBudgetModified=!0}function hideYearPicker(){window.location="nav://,hidebudget",g_nativeScrollVisible=!1}function showYearPicker(){var t=_glocalStorage.loadData("orgdata"),e=t.detail[0].fromdate,a=t.detail[0].todate;e=new Date(e),a=new Date(a),setTimeout(function(){window.location="nav://,budget,"+e.getFullYear().toString().substr(2)+","+a.getFullYear().toString().substr(2)},200),g_nativeScrollVisible=!0}$("#appMenu li").on("click",function(t){"p_sync"!=t.currentTarget.id&&"p_logout"!=t.currentTarget.id&&"p_vision"!=t.currentTarget.id&&"menu_bars"!=t.currentTarget.id&&(window.location="nav://,hidebudget",g_nativeScrollVisible=!1),$(this).hasClass("sidebar-toggle")||($("#appMenu li").each(function(t,e){$(e).hasClass("transition")||$(e).addClass("transition")}),$(this).removeClass("transition"))}),$("#ceo-vision-help").on("hidden.bs.modal",function(){g_nativeScrollVisible&&GetVision()});var g_nativeScrollVisible=!1,isBudgetModified=!1;