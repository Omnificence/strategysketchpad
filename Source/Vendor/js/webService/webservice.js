function CallBack(){this.func="",this.data=""}function RequestHeader(e,t,s){this.command=e,this.data=t,this.callback=s}function WebService(){this.XmlHttp=new XMLHttpRequest,this.Url="service/WebService.aspx"}var _gWebService=new WebService;WebService.prototype.PostRequest=function(e,t){try{if(e.service=this.service,console.log("Request: "+JSON.stringify(e)),this.XmlHttp.open("POST",this.Url,t),this.XmlHttp.send(JSON.stringify(e)),!t)return JSON.parse(this.XmlHttp.responseText).result;var s=this,r=(e.callback,window.setInterval(function(e){if(4==s.XmlHttp.readyState){if(window.clearInterval(r),200!=s.XmlHttp.status)return;console.log("Response: "+s.XmlHttp.responseText);var t=JSON.parse(s.XmlHttp.responseText);t.iserror&&(764==t.code?(alert("Session Expired !"),location.reload()):alert(t.message));var i=t.result;""!=e.func&&window[e.func](i,e.data)}},1e3,e.callback))}catch(i){alert(i)}};